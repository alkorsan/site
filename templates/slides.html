<!DOCTYPE html>
<html>
  <head>
    <title>{{ title }} â€” by Renoir Boulanger</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    {{#if keywords }}<meta name="keywords" content="{{keywords}}" />{{/if}}
    {{#if description }}<meta name="description" content="{{description}}" />{{/if}}
    <script src="/talks/js/remark.js"></script>
    <script src="/talks/js/socket.js"></script>
  </head>
  <body>
    {{{ contents }}}
    <script>
        var  slideshow = remark.create({
                sourceUrl: 'slides.md'
             })
            ,_id = 1234
            ,clientId = null
            ,socket = io.connect();

        socket.on('connect', function socketConnectHandler () {
            clientId = socket.id||null;
            socket.on('triggerSlide', function socketioTriggerSlideHandler (obj) {
                console.log('triggerSlide received by', obj);
                if (obj.nextSlide && obj.id === _id) {
                    slideshow.gotoSlide(obj.nextSlide);
                }
            });

            slideshow.on('showSlide', function slideshowShowSlideHandler (slide) {
                var nextSlide = slide.getSlideIndex() + 1;
                socket.emit('nextSlide', {id: _id, nextSlide: nextSlide, clientId: clientId});
                console.log('slideshow.on showSlide emitted');
            });
        });

    </script>
  </body>
</html>
